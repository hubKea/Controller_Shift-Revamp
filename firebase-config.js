import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';\nimport { getAuth } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';\nimport { getFirestore } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';\n\nconst importMetaEnv = typeof import.meta !== 'undefined' && import.meta ? import.meta.env ?? {} : {};\nconst processEnv = typeof process !== 'undefined' && process?.env ? process.env : {};\nconst globalEnv = typeof globalThis !== 'undefined' && globalThis.__FIREBASE_CONFIG__ ? globalThis.__FIREBASE_CONFIG__ : {};\n\nconst FALLBACK_KEYS = {\n  FIREBASE_API_KEY: ['FIREBASE_API_KEY', 'VITE_FIREBASE_API_KEY'],\n  FIREBASE_AUTH_DOMAIN: ['FIREBASE_AUTH_DOMAIN', 'VITE_FIREBASE_AUTH_DOMAIN'],\n  FIREBASE_PROJECT_ID: ['FIREBASE_PROJECT_ID', 'VITE_FIREBASE_PROJECT_ID'],\n  FIREBASE_STORAGE_BUCKET: ['FIREBASE_STORAGE_BUCKET', 'VITE_FIREBASE_STORAGE_BUCKET'],\n  FIREBASE_MESSAGING_SENDER_ID: ['FIREBASE_MESSAGING_SENDER_ID', 'VITE_FIREBASE_MESSAGING_SENDER_ID'],\n  FIREBASE_APP_ID: ['FIREBASE_APP_ID', 'VITE_FIREBASE_APP_ID'],\n  FIREBASE_MEASUREMENT_ID: ['FIREBASE_MEASUREMENT_ID', 'VITE_FIREBASE_MEASUREMENT_ID']\n};\n\nfunction resolveEnvValue(key) {\n  const variants = FALLBACK_KEYS[key] || [key];\n  for (const variant of variants) {\n    if (importMetaEnv && typeof importMetaEnv[variant] === 'string' && importMetaEnv[variant]) {\n      return importMetaEnv[variant];\n    }\n    if (processEnv && typeof processEnv[variant] === 'string' && processEnv[variant]) {\n      return processEnv[variant];\n    }\n  }\n\n  const globalKey = key\n    .toLowerCase()\n    .replace(/^firebase_/, '')\n    .replace(/_([a-z])/g, (_, char) => char.toUpperCase());\n\n  if (globalEnv && typeof globalEnv[key] === 'string' && globalEnv[key]) {\n    return globalEnv[key];\n  }\n  if (globalEnv && typeof globalEnv[globalKey] === 'string' && globalEnv[globalKey]) {\n    return globalEnv[globalKey];\n  }\n  return undefined;\n}\n\nconst firebaseConfig = {\n  apiKey: resolveEnvValue('FIREBASE_API_KEY'),\n  authDomain: resolveEnvValue('FIREBASE_AUTH_DOMAIN'),\n  projectId: resolveEnvValue('FIREBASE_PROJECT_ID'),\n  storageBucket: resolveEnvValue('FIREBASE_STORAGE_BUCKET'),\n  messagingSenderId: resolveEnvValue('FIREBASE_MESSAGING_SENDER_ID'),\n  appId: resolveEnvValue('FIREBASE_APP_ID'),\n  measurementId: resolveEnvValue('FIREBASE_MEASUREMENT_ID')\n};\n\nconst requiredKeys = ['apiKey', 'authDomain', 'projectId', 'appId'];\nconst missingRequired = requiredKeys.filter((key) => !firebaseConfig[key]);\n\nif (missingRequired.length) {\n  const message = Missing Firebase configuration values: . Provide them through environment variables or by defining window.__FIREBASE_CONFIG__.;\n  throw new Error(message);\n}\n\nconst app = initializeApp(firebaseConfig);\n\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\nexport default app;\n
